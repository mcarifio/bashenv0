#!/usr/bin/env bash

function emacsclient {
    local -i _frames=$(command emacsclient --no-wait --eval '(length (frame-list))')
    local _create_frame=''
    (( _frames < 2 )) && _create_frame='--create-frame'
    local -a _args=($@)
    (( ${#_args[*]} == 0 )) && _args=(.)
    command emacsclient ${_create_frame} --no-wait "${_args[*]}"
}

function _ec {
    emacsclient "$*"
}

# TODO mike@carif.io: fix was-run so scripts can be sourced.
# was-run && _$(basename ${BASH_SOURCE} .sh) "$@"
_$(basename ${BASH_SOURCE} .sh) "$@"



